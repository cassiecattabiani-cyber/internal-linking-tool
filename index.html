<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Internal Linking Tool v2 - SEO Dashboard</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Page Details Modal -->
    <div id="pageModal" class="modal-overlay" onclick="closeModal(event)">
        <div class="modal-container" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2 id="modalTitle">Page Details</h2>
                <button class="modal-close" onclick="closeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="modal-url" id="modalUrl">/page/url</div>
                <div class="modal-metrics">
                    <div class="metric-box">
                        <span class="metric-label">Position</span>
                        <span class="metric-value" id="modalPosition">--</span>
                    </div>
                    <div class="metric-box">
                        <span class="metric-label">Inlinks</span>
                        <span class="metric-value" id="modalInlinks">--</span>
                    </div>
                    <div class="metric-box">
                        <span class="metric-label">Depth</span>
                        <span class="metric-value" id="modalDepth">--</span>
                    </div>
                    <div class="metric-box">
                        <span class="metric-label">Score</span>
                        <span class="metric-value" id="modalScore">--</span>
                    </div>
                </div>
                <div class="modal-grid">
                    <div class="modal-section">
                        <h4><i class="fas fa-clipboard-check"></i> Technical Gaps</h4>
                        <ul id="modalTechChecklist" class="tech-checklist-list"></ul>
                    </div>
                    <div class="modal-section">
                        <h4><i class="fas fa-link"></i> Interlink Recommendations</h4>
                        <div class="modal-recommendations" id="modalRecommendations">
                            <table class="recommendations-table">
                                <thead>
                                    <tr>
                                        <th>Source Page</th>
                                        <th>Relevance</th>
                                        <th>Anchor Text</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody id="modalRecommendationsBody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- App Layout -->
    <div class="app-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-link"></i>
                    <span>LinkFlow</span>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-tab="dashboard">
                    <i class="fas fa-th-large"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item" data-tab="priority-queue">
                    <i class="fas fa-list-ol"></i>
                    <span>All Pages</span>
                </a>

                <a href="#" class="nav-item" data-tab="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </nav>
            
            <div class="sidebar-stats">
                <div class="stats-heading">Quick Stats</div>
                <div class="stat-item">
                    <span class="stat-value" id="sidebarTotal">--</span>
                    <span class="stat-label">Total Pages</span>
                </div>
                <div class="stat-item critical">
                    <span class="stat-value" id="sidebarCritical">--</span>
                    <span class="stat-label">Critical</span>
                </div>
                <div class="stat-item moderate">
                    <span class="stat-value" id="sidebarModerate">--</span>
                    <span class="stat-label">Moderate</span>
                </div>
            </div>
            
            <div class="sidebar-footer">
                <button class="dark-mode-toggle" onclick="toggleDarkMode()">
                    <i class="fas fa-moon"></i>
                    <span>Dark Mode</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Bar -->
            <header class="top-bar">
                <div class="search-container">
                    <i class="fas fa-search"></i>
                    <input type="text" id="globalSearch" placeholder="Search pages..." oninput="handleSearch()">
                </div>
                <div class="top-bar-actions">
                    <div class="filter-dropdown">
                        <select id="marketFilter" onchange="applyFilters()">
                            <option value="global">All Markets</option>
                            <option value="us">US</option>
                            <option value="au">AU</option>
                            <option value="gb">GB</option>
                            <option value="ca">CA</option>
                        </select>
                    </div>
                    <div class="filter-dropdown">
                        <select id="techIssueFilter" onchange="applyFilters()">
                            <option value="all">All Issues</option>
                            <option value="low_inlinks">Low Inlinks</option>
                            <option value="orphaned">Orphaned</option>
                            <option value="deep_page">Deep Pages</option>
                            <option value="not_in_sitemap">Not in Sitemap</option>
                        </select>
                    </div>
                    <button class="btn-export" onclick="exportCSV()">
                        <i class="fas fa-download"></i>
                        Export
                    </button>
                </div>
            </header>

            <!-- Dashboard Tab -->
            <div id="dashboard-tab" class="tab-content active">
                <section class="gaps-section dashboard-gaps">
                    <div class="section-header">
                        <h2><i class="fas fa-exclamation-triangle"></i> Technical Gaps Overview</h2>
                    </div>
                    <div class="gaps-cards">
                        <div class="gap-card purple">
                            <div class="gap-icon"><i class="fas fa-link"></i></div>
                            <div class="gap-info">
                                <span class="gap-value" id="gapLowInlinks">--</span>
                                <span class="gap-label">Low Inlinks</span>
                            </div>
                        </div>
                        <div class="gap-card orange">
                            <div class="gap-icon"><i class="fas fa-unlink"></i></div>
                            <div class="gap-info">
                                <span class="gap-value" id="gapOrphaned">--</span>
                                <span class="gap-label">Orphaned</span>
                            </div>
                        </div>
                        <div class="gap-card blue">
                            <div class="gap-icon"><i class="fas fa-layer-group"></i></div>
                            <div class="gap-info">
                                <span class="gap-value" id="gapDeepPages">--</span>
                                <span class="gap-label">Deep Pages</span>
                            </div>
                        </div>
                        <div class="gap-card pink">
                            <div class="gap-icon"><i class="fas fa-sitemap"></i></div>
                            <div class="gap-info">
                                <span class="gap-value" id="gapNotInSitemap">--</span>
                                <span class="gap-label">Not in Sitemap</span>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="cards-section">
                    <div class="section-header">
                        <h2><i class="fas fa-fire"></i> Pages Needing Attention</h2>
                    </div>
                    <div class="page-cards-container" id="pageCardsContainer">
                        <div class="loading-cards">
                            <span class="spinner"></span>
                            <span>Loading priority pages...</span>
                        </div>
                    </div>
                </section>

                <section class="details-section" id="detailsSection">
                    <div class="details-placeholder" id="detailsPlaceholder">
                        <i class="fas fa-hand-pointer"></i>
                        <h3>Select a page above</h3>
                        <p>Click on any page card to view details and recommendations</p>
                    </div>
                    <div class="details-content" id="detailsContent" style="display: none;">
                        <div class="details-grid">
                            <div class="details-info">
                                <div class="details-header">
                                    <h3 id="detailsTitle">Page Title</h3>
                                    <span class="details-url" id="detailsUrl">/page/url</span>
                                </div>
                                <div class="metrics-row">
                                    <div class="metric-box">
                                        <span class="metric-label">Position</span>
                                        <span class="metric-value" id="detailsPosition">--</span>
                                    </div>
                                    <div class="metric-box">
                                        <span class="metric-label">Inlinks</span>
                                        <span class="metric-value" id="detailsInlinks">--</span>
                                    </div>
                                    <div class="metric-box">
                                        <span class="metric-label">Depth</span>
                                        <span class="metric-value" id="detailsDepth">--</span>
                                    </div>
                                    <div class="metric-box">
                                        <span class="metric-label">Score</span>
                                        <span class="metric-value" id="detailsScore">--</span>
                                    </div>
                                </div>
                                <div class="tech-checklist">
                                    <h4><i class="fas fa-clipboard-check"></i> Technical Gaps</h4>
                                    <ul id="techChecklist"></ul>
                                </div>
                            </div>
                            <div class="details-recommendations">
                                <h4><i class="fas fa-link"></i> Interlink Recommendations</h4>
                                <div class="recommendations-table-container" id="recommendationsContainer">
                                    <table class="recommendations-table">
                                        <thead>
                                            <tr>
                                                <th>Source Page</th>
                                                <th>Relevance</th>
                                                <th>Anchor Text</th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        <tbody id="recommendationsBody"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Page Path Breakdown Tab -->
            <div id="priority-queue-tab" class="tab-content">
                <section class="table-section">
                    <div class="section-header">
                        <h2><i class="fas fa-list-ol"></i> Page Path Breakdown</h2>
                        <span class="results-count" id="resultsCount">-- results</span>
                    </div>
                    <div class="table-container">
                        <table class="data-table" id="priorityTable">
                            <thead>
                                <tr>
                                    <th onclick="sortTable('url')">URL <i class="fas fa-sort"></i></th>
                                    <th onclick="sortTable('priority_score')">Score <i class="fas fa-sort"></i></th>
                                    <th onclick="sortTable('bucket')">Category <i class="fas fa-sort"></i></th>
                                    <th onclick="sortTable('position')">Position <i class="fas fa-sort"></i></th>
                                    <th onclick="sortTable('inlinks')">Inlinks <i class="fas fa-sort"></i></th>
                                    <th>Tech Issues</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="tableBody"></tbody>
                        </table>
                    </div>
                    <div class="pagination" id="pagination">
                        <span id="paginationInfo">Showing 0 results</span>
                        <div class="pagination-controls">
                            <button class="pagination-btn" id="prevPage" onclick="changePage(-1)" disabled>
                                <i class="fas fa-chevron-left"></i> Prev
                            </button>
                            <div class="pagination-pages" id="paginationPages"></div>
                            <button class="pagination-btn" id="nextPage" onclick="changePage(1)">
                                Next <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Settings Tab -->
            <div id="settings-tab" class="tab-content">
                <section class="settings-section">
                    <div class="section-header">
                        <h2><i class="fas fa-cog"></i> Settings</h2>
                    </div>
                    <div class="settings-grid">
                        <div class="settings-card">
                            <h3><i class="fas fa-plug"></i> API Configuration</h3>
                            <div class="api-status-list">
                                <div class="api-status-item">
                                    <div class="api-status-info">
                                        <span class="api-name">OnCrawl</span>
                                        <span class="api-description">Technical SEO data</span>
                                    </div>
                                    <span class="status-indicator" id="oncrawlStatus">
                                        <i class="fas fa-circle"></i>
                                        <span>Not tested</span>
                                    </span>
                                </div>
                                <div class="api-status-item">
                                    <div class="api-status-info">
                                        <span class="api-name">SEMRush</span>
                                        <span class="api-description">Keyword & ranking data</span>
                                    </div>
                                    <span class="status-indicator" id="semrushStatus">
                                        <i class="fas fa-circle"></i>
                                        <span>Not tested</span>
                                    </span>
                                </div>
                            </div>
                            <button class="btn-primary" onclick="testConnections()">
                                <i class="fas fa-plug"></i> Test Connections
                            </button>
                        </div>

                    </div>
                </section>
            </div>
        </main>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
